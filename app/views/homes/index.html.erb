<!DOCTYPE html>
<html>
<head>
  <title>Test Project</title>
  <style>
     .category {
    margin-top: 2rem;
  }

  .category h2 {
    font-size: 1.5rem;
    margin-bottom: 1rem;
  }

  .product-list {
    list-style: none;
    padding: 0;
    display: flex;
    flex-wrap: wrap;
  }

  .product {
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 1rem;
    margin: 1rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .product-details {
    flex: 1;
    text-align: center;
  }

  .product strong {
    font-size: 1.2rem;
    color: #333;
  }

  .product p {
    color: #666;
  }

  .product-price {
    color: brown;
    font-weight: bold;
  }

  .product-image {
    margin-top: 1rem;
    text-align: center;
  }

  .no-image {
    color: #999;
  }

  img {
    max-width: 100%;
    height: auto;
  }
    body {
      font-family: Arial, sans-serif;
      background-color: #f2f2f2;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #333;
      color: white;
      text-align: center;
      padding: 1rem 0;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
      background-color: white;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    form {
      display: flex;
      justify-content: center;
      margin-bottom: 1rem;
    }
    input[type="text"] {
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    input[type="submit"] {
      background-color: #333;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      cursor: pointer;
    }
    h2 {
      margin-top: 1.5rem;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      padding: 1rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      margin-bottom: 1rem;
      background-color: #fff;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    strong {
      font-size: 1.2rem;
    }
    p {
      margin-top: 0.5rem;
      color: #666;
    }
    img {
      max-width: 100%;
      height: auto;
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>Welcome <%= current_user.email %></h1>
  </header>
  <div class="container">
    <form action="<%= search_path %>" method="get">
      <input type="text" name="query" value="<%= params[:query] %>" placeholder="Search products...">
      <input type="submit" value="Search">
    </form>

    <% if @query.present? %>
      <h2>Filtered Products</h2>
      <ul>
        <% @products.each do |product| %>
          <li>
            <strong><%= product.name %></strong>
            <p><%= product.description %></p>
            <p>Price: <%= product.price %></p>
            <% if product.image.attached? %>
              <%= image_tag product.image.variant(resize: "150x150") rescue nil %>
            <% else %>
              <p>No image attached</p>
            <% end %>
          </li>
        <% end %>
      </ul>
    <% end %>


    <!-- Rest of your code here -->
  </div>
  <% @categories.each do |category| %>
  <div class="category">
    <h2><%= category.name %></h2>

    <ul class="product-list">
      <% category.products.each do |product| %>
        <li class="product">
          <div class="product-details">
            <strong><%= product.name %></strong>
            <p><%= product.description %></p>
            <p class="product-price">Price: <%= product.price %></p>
          </div>
          <div class="product-image">
            <% if product.image.attached? %>
              <%= image_tag product.image.variant(resize: "150x150") rescue nil %>
            <% else %>
              <p class="no-image">No image attached</p>
            <% end %>
          </div>
        </li>
      <% end %>
    </ul>
  </div>
<% end %>

</body>
</html>
